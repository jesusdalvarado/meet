(function(){const $=document.createElement("link").relList;if($&&$.supports&&$.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))we(d);new MutationObserver(d=>{for(const w of d)if(w.type==="childList")for(const K of w.addedNodes)K.tagName==="LINK"&&K.rel==="modulepreload"&&we(K)}).observe(document,{childList:!0,subtree:!0});function Fe(d){const w={};return d.integrity&&(w.integrity=d.integrity),d.referrerPolicy&&(w.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?w.credentials="include":d.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function we(d){if(d.ep)return;d.ep=!0;const w=Fe(d);fetch(d.href,w)}})();const mr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};(function(){var ve=Object.defineProperty;function $(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var Fe=$(this);function we(e,t){if(t)e:{var n=Fe;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&ve(n,e,{configurable:!0,writable:!0,value:t})}}we("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")});var d=this||self;function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function K(e,t){function n(){}n.prototype=t.prototype,e.qa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.oa=function(r,i,s){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return t.prototype[i].apply(r,o)}}function ae(e,t){if(Error.captureStackTrace)Error.captureStackTrace(this,ae);else{const n=Error().stack;n&&(this.stack=n)}e&&(this.message=String(e)),t!==void 0&&(this.cause=t)}K(ae,Error),ae.prototype.name="CustomError";function Y(e){d.setTimeout(()=>{throw e},0)}var ke,Se;e:{for(var kt=["CLOSURE_FLAGS"],Ae=d,Be=0;Be<kt.length;Be++)if(Ae=Ae[kt[Be]],Ae==null){Se=null;break e}Se=Ae}var Bt=Se&&Se[610401301];ke=Bt??!1;var le;const zt=d.navigator;le=zt&&zt.userAgentData||null;function ze(e){return ke&&le?le.brands.some(({brand:t})=>t&&t.indexOf(e)!=-1):!1}function I(e){var t;e:{if((t=d.navigator)&&(t=t.userAgent))break e;t=""}return t.indexOf(e)!=-1}function F(){return ke?!!le&&le.brands.length>0:!1}function Je(){return F()?ze("Chromium"):(I("Chrome")||I("CriOS"))&&!(!F()&&I("Edge"))||I("Silk")}function Jt(e,t){t=Array.prototype.indexOf.call(e,t,void 0),t>=0&&Array.prototype.splice.call(e,t,1)}!I("Android")||Je(),Je(),I("Safari")&&(Je()||!F()&&I("Coast")||!F()&&I("Opera")||!F()&&I("Edge")||(F()?ze("Microsoft Edge"):I("Edg/"))||F()&&ze("Opera"));function Wt(e){let t="",n=0;const r=e.length-10240;for(;n<r;)t+=String.fromCharCode.apply(null,e.subarray(n,n+=10240));return t+=String.fromCharCode.apply(null,n?e.subarray(n):e),btoa(t)}const Gt=/[-_.]/g,Sr={"-":"+",_:"/",".":"="};function Ar(e){return Sr[e]||""}function We(e){return e!=null&&e instanceof Uint8Array}var ce={};function xe(){return Kt||(Kt=new ue(null,ce))}var ue=class{constructor(e,t){if(Yt(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}};let Kt;function Yt(e){if(e!==ce)throw Error("illegal external caller")}function Vt(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}let qt;function Ht(){const e=Error();Vt(e,"incident"),Y(e)}function Xt(e){return e=Error(e),Vt(e,"warning"),e}function Ge(){return typeof BigInt=="function"}function fe(e){return Array.prototype.slice.call(e)}function Ke(e,t){return t&&Symbol.for&&e?Symbol.for(e):e!=null?Symbol(e):Symbol()}var u=Ke("jas",!0),Ye=Ke(),Qt=Ke();function xr(e,t){t[u]=(e|0)&-30975}function Ve(e,t){t[u]=(e|34)&-30941}var Ee={},Er={};function Zt(e){return!(!e||typeof e!="object"||e.g!==Er)}function qe(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function en(e,t){if(e!=null){if(typeof e=="string")e=e?new ue(e,ce):xe();else if(e.constructor!==ue)if(We(e))e=e.length?new ue(new Uint8Array(e),ce):xe();else{if(!t)throw Error();e=void 0}}return e}function Te(e){return!Array.isArray(e)||e.length?!1:!!((e[u]|0)&1)}var tn;const nn=[];nn[u]=55,tn=Object.freeze(nn);function Pe(e){if(e&2)throw Error()}var Tr=Object.freeze({});function Ne(e){return e.pa=!0,e}var Pr=Ne(e=>typeof e=="number"),rn=Ne(e=>typeof e=="string"),Nr=Ne(e=>typeof e=="boolean"),Ie=typeof d.BigInt=="function"&&typeof d.BigInt(0)=="bigint",He=Ne(e=>Ie?e>=jr&&e<=Mr:e[0]==="-"?on(e,Ir):on(e,Ur));const Ir=Number.MIN_SAFE_INTEGER.toString(),jr=Ie?BigInt(Number.MIN_SAFE_INTEGER):void 0,Ur=Number.MAX_SAFE_INTEGER.toString(),Mr=Ie?BigInt(Number.MAX_SAFE_INTEGER):void 0;function on(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(r>i)return!1;if(r<i)return!0}}let m=0,x=0;function sn(e){const t=e>>>0;m=t,x=(e-t)/4294967296>>>0}function an(e){if(e<0){sn(-e);const[t,n]=Qe(m,x);m=t>>>0,x=n>>>0}else sn(e)}function Xe(e,t){if(t>>>=0,e>>>=0,t<=2097151)var n=""+(4294967296*t+e);else Ge()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(n=(e>>>24|t<<8)&16777215,t=t>>16&65535,e=(e&16777215)+n*6777216+t*6710656,n+=t*8147497,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+ln(n)+ln(e));return n}function ln(e){return e=String(e),"0000000".slice(e.length)+e}function Qe(e,t){return t=~t,e?e=~e+1:t+=1,[e,t]}function cn(e){if(e==null||typeof e=="boolean")return e;if(typeof e=="number")return!!e}const Cr=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function un(e){const t=typeof e;switch(t){case"bigint":return!0;case"number":return Number.isFinite(e)}return t!=="string"?!1:Cr.test(e)}function O(e){if(e!=null){if(!Number.isFinite(e))throw Xt("enum");e|=0}return e}function Ze(e){if(e!=null&&typeof e=="string"){if(!e)return;e=+e}}function et(e){if(e!=null)e:{if(!un(e))throw Xt("int64");switch(typeof e){case"string":e=dn(e);break e;case"bigint":var t=e=BigInt.asIntN(64,e);if(rn(t)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t))throw Error(String(t))}else if(Pr(t)&&!Number.isSafeInteger(t))throw Error(String(t));Ie?e=BigInt(e):e=Nr(e)?e?"1":"0":rn(e)?e.trim()||"0":String(e);break e;default:e=fn(e)}}return e}function fn(e){if(e=Math.trunc(e),!Number.isSafeInteger(e)){an(e);var t=m,n=x;(e=n&2147483648)&&(t=~t+1>>>0,n=~n>>>0,t==0&&(n=n+1>>>0));const r=n*4294967296+(t>>>0);t=Number.isSafeInteger(r)?r:Xe(t,n),e=typeof t=="number"?e?-t:t:e?"-"+t:t}return e}function dn(e){var t=Math.trunc(Number(e));if(Number.isSafeInteger(t))return String(t);if(t=e.indexOf("."),t!==-1&&(e=e.substring(0,t)),!(e[0]==="-"?e.length<20||e.length===20&&Number(e.substring(0,7))>-922337:e.length<19||e.length===19&&Number(e.substring(0,6))<922337)){if(e.length<16)an(Number(e));else if(Ge())e=BigInt(e),m=Number(e&BigInt(4294967295))>>>0,x=Number(e>>BigInt(32)&BigInt(4294967295));else{t=+(e[0]==="-"),x=m=0;const n=e.length;for(let r=t,i=(n-t)%6+t;i<=n;r=i,i+=6){const s=Number(e.slice(r,i));x*=1e6,m=m*1e6+s,m>=4294967296&&(x+=Math.trunc(m/4294967296),x>>>=0,m>>>=0)}if(t){const[r,i]=Qe(m,x);m=r,x=i}}if(e=m,t=x,t&2147483648)if(Ge())e=""+(BigInt(t|0)<<BigInt(32)|BigInt(e>>>0));else{const[n,r]=Qe(e,t);e="-"+Xe(n,r)}else e=Xe(e,t)}return e}function R(e){if(e!=null&&typeof e!="string")throw Error();return e}function hn(e,t,n){if(e!=null&&typeof e=="object"&&e.H===Ee)return e;if(Array.isArray(e)){var r=e[u]|0,i=r;return i===0&&(i|=n&32),i|=n&2,i!==r&&(e[u]=i),new t(e)}}function br(e){de===void 0&&(de=typeof Proxy=="function"?yn(Proxy):null);var t;return(t=!de)||(he===void 0&&(he=typeof WeakMap=="function"?yn(WeakMap):null),t=!he),t?e:(t=gn(e))?t:Math.random()>.01?e:(_r(e),t=new de(e,{set(n,r,i){return Or(),n[r]=i,!0}}),Rr(e,t),t)}function Or(){Ht()}let je,tt;function gn(e){let t;return(t=je)==null?void 0:t.get(e)}function Rr(e,t){(je||(je=new he)).set(e,t),(tt||(tt=new he)).set(t,e)}let de,he;function yn(e){try{return e.toString().indexOf("[native code]")!==-1?e:null}catch{return null}}let nt;function _r(e){if(nt===void 0){const t=new de([],{});nt=Array.prototype.concat.call([],t).length===1}nt&&typeof Symbol=="function"&&Symbol.isConcatSpreadable&&(e[Symbol.isConcatSpreadable]=!0)}function Dr(e,t){return pn(t)}function pn(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"bigint":return He(e)?Number(e):String(e);case"boolean":return e?1:0;case"object":if(e)if(Array.isArray(e)){if(Te(e))return}else{if(We(e))return Wt(e);if(e instanceof ue){const t=e.g;return t==null?"":typeof t=="string"?t:e.g=Wt(t)}}}return e}function Lr(e,t,n){e=fe(e);var r=e.length;const i=t&256?e[r-1]:void 0;for(r+=i?-1:0,t=t&512?1:0;t<r;t++)e[t]=n(e[t]);if(i){t=e[t]={};for(const s in i)t[s]=n(i[s])}return e}function mn(e,t,n,r,i){if(e!=null){if(Array.isArray(e))e=Te(e)?void 0:i&&(e[u]|0)&2?e:rt(e,t,n,r!==void 0,i);else if(qe(e)){const s={};for(let o in e)s[o]=mn(e[o],t,n,r,i);e=s}else e=t(e,r);return e}}function rt(e,t,n,r,i){const s=r||n?e[u]|0:0;r=r?!!(s&32):void 0,e=fe(e);for(let o=0;o<e.length;o++)e[o]=mn(e[o],t,n,r,i);return n&&n(s,e),e}function $r(e){return e.H===Ee?e.toJSON():pn(e)}function vn(e,t,n=Ve){if(e!=null){if(e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var r=e[u]|0;return r&2?e:(t&&(t=r===0||!!(r&32)&&!(r&64||!(r&16))),t?(e[u]=(r|34)&-12293,e):rt(e,vn,r&4?Ve:n,!0,!0))}return e.H===Ee&&(n=e.m,r=n[u],e=r&2?e:new e.constructor(it(n,r,!0))),e}}function it(e,t,n){const r=n||t&2?Ve:xr,i=!!(t&32);return e=Lr(e,t,s=>vn(s,i,r)),e[u]=e[u]|32|(n?2:0),e}function ot(e){const t=e.m,n=t[u];return n&2?new e.constructor(it(t,n,!1)):e}function _(e,t){return e=e.m,V(e,e[u],t)}function wn(e,t,n,r){if(t=r+(+!!(t&512)-1),!(t<0||t>=e.length||t>=n))return e[t]}function V(e,t,n,r){if(n===-1)return null;const i=t>>15&1023||536870912;if(n>=i){if(t&256)return e[e.length-1][n]}else{var s=e.length;if(r&&t&256&&(r=e[s-1][n],r!=null)){if(wn(e,t,i,n)&&Ye!=null){var o;e=(o=qt)!=null?o:qt={},o=e[Ye]||0,o>=4||(e[Ye]=o+1,Ht())}return r}return wn(e,t,i,n)}}function st(e,t,n){const r=e.m;let i=r[u];return Pe(i),S(r,i,t,n),e}function S(e,t,n,r){const i=t>>15&1023||536870912;if(n>=i){let s,o=t;if(t&256)s=e[e.length-1];else{if(r==null)return o;s=e[i+(+!!(t&512)-1)]={},o|=256}return s[n]=r,n<i&&(e[n+(+!!(t&512)-1)]=void 0),o!==t&&(e[u]=o),o}return e[n+(+!!(t&512)-1)]=r,t&256&&(e=e[e.length-1],n in e&&delete e[n]),t}function q(e,t,n,r){return n=D(e,r)===n?n:-1,Sn(e,t,n)!==void 0}function H(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function g(e,t,n,r){const i=e.m;let s=i[u];return Pe(s),S(i,s,t,(r==="0"?Number(n)===0:n===r)?void 0:n),e}function D(e,t){return e=e.m,lt(at(e),e,e[u],t)}function at(e){let t;return(t=e[Qt])!=null?t:e[Qt]=new Map}function lt(e,t,n,r){let i=e.get(r);if(i!=null)return i;i=0;for(let s=0;s<r.length;s++){const o=r[s];V(t,n,o)!=null&&(i!==0&&(n=S(t,n,i)),i=o)}return e.set(r,i),i}function Sn(e,t,n,r){e=e.m;let i=e[u];return r=V(e,i,n,r),t=hn(r,t,i),t!==r&&t!=null&&S(e,i,n,t),t}function ct(e,t,n){if(t=Sn(e,t,n,!1),t==null)return t;e=e.m;let r=e[u];if(!(r&2)){const i=ot(t);i!==t&&(t=i,S(e,r,n,t))}return t}function X(e,t,n){return n==null&&(n=void 0),st(e,t,n)}function h(e,t,n,r){r==null&&(r=void 0);e:{const o=e.m;var i=o[u];if(Pe(i),r==null){var s=at(o);if(lt(s,o,i,n)===t)s.set(n,0);else break e}else{s=o;const l=at(s),a=lt(l,s,i,n);a!==t&&(a&&(i=S(s,i,a)),l.set(n,t))}S(o,i,t,r)}return e}function An(e,t){const n=e.m;let r=n[u];if(Pe(r),t==null)return S(n,r,1),e;var i=t,s;t=((s=tt)==null?void 0:s.get(i))||i,s=i=t[u]|0;const o=H(i),l=o||Object.isFrozen(t);let a=!0,p=!0;for(let A=0;A<t.length;A++){var v=t[A];o||(v=!!((v.m[u]|0)&2),a&&(a=!v),p&&(p=v))}return o||(i=a?13:5,i=p?i|16:i&-17),l&&i===s||(t=fe(t),s=0,i=Ue(i,r),i=ut(i,r,!0)),i!==s&&(t[u]=i),S(n,r,1,t),e}function Ue(e,t){return e=(2&t?e|2:e&-3)|32,e&=-2049}function ut(e,t,n){return 32&t&&n||(e&=-33),e}function Q(e,t){return e??t}function xn(e){return e=_(e,1),e!=null&&(typeof e=="bigint"?He(e)?e=Number(e):(e=BigInt.asIntN(64,e),e=He(e)?Number(e):String(e)):e=un(e)?typeof e=="number"?fn(e):dn(e):void 0),Q(e,0)}function E(e,t){return e=_(e,t),Q(e==null||typeof e=="string"?e:void 0,"")}function k(e,t){return e=_(e,t),e=e==null?e:Number.isFinite(e)?e|0:void 0,Q(e,0)}function y(e,t,n,r){return n=D(e,r)===n?n:-1,ct(e,t,n)}let Z;function ft(e){try{return Z=!0,JSON.stringify(dt(e),Dr)}finally{Z=!1}}function Fr(){var e=ir||(ir=kr("[1,2,0]"));e=ot(e),e=st(e,4,R("dev-706864954"));const t=e.m,n=t[u];return n&2?e:new e.constructor(it(t,n,!0))}var c=class{constructor(e){e:{var t=t??0;if(e==null){var n=96;e=[]}else{if(!Array.isArray(e))throw Error("narr");if(n=e[u]|0,n&2048)throw Error("farr");if(n&64)break e;t===1||t===2||(n|=64),t=e;var r=t.length;if(r&&(--r,qe(t[r]))){if(n|=256,t=r-(+!!(n&512)-1),t>=1024)throw Error("pvtlmt");n=n&-33521665|(t&1023)<<15}}e[u]=n}this.m=e}toJSON(){return dt(this)}};c.prototype.H=Ee,c.prototype.toString=function(){try{return Z=!0,dt(this).toString()}finally{Z=!1}};function dt(e){e=e.m,e=Z?e:rt(e,$r,void 0,void 0,!1);{var t=!Z;let p=e.length;if(p){var n=e[p-1],r=qe(n);r?p--:n=void 0;var i=e;if(r){e:{var s=n,o,l=!1;if(s){for(let v in s)if(isNaN(+v)){let A;((A=o)!=null?A:o={})[v]=s[v]}else if(r=s[v],Array.isArray(r)&&(Te(r)||Zt(r)&&r.size===0)&&(r=null),r==null&&(l=!0),r!=null){let A;((A=o)!=null?A:o={})[v]=r}}if(l||(o=s),o)for(let v in o){l=o;break e}l=null}s=l==null?n!=null:l!==n}for(;p>0&&(o=i[p-1],!!(o==null||Te(o)||Zt(o)&&o.size===0));p--)var a=!0;(i!==e||s||a)&&(t?(a||s||l)&&(i.length=p):i=Array.prototype.slice.call(i,0,p),l&&i.push(l)),a=i}else a=e}return a}function Me(e){return t=>{if(t==null||t=="")t=new e;else{if(t=JSON.parse(t),!Array.isArray(t))throw Error("dnarr");t[u]|=32,t=new e(t)}return t}}var kr=function(e){return t=>{if(t=JSON.parse(t),!Array.isArray(t)){var n=typeof t;throw Error("Expected jspb data to be an array, got "+(n!="object"?n:t?Array.isArray(t)?"array":n:"null")+": "+t)}return t[u]|=34,new e(t)}}(class extends c{}),En=class extends c{};function Br(e){var t=new Nn(500);let n=0,r;return(...i)=>{Tn(t)?e(...i):(r=()=>void e(...i),n||(n=setTimeout(()=>{n=0;let s;(s=r)==null||s()},Jr(t))))}}function zr(e){var t=new Nn(100),n=Promise.resolve();return(...r)=>Tn(t)?e(...r):n}function Tn(e){return Pn(e,e.index)>=e.g?(e.h[e.index]=Date.now(),e.index=(e.index+1)%1,!0):!1}function Jr(e){const t=e.g;return e=Pn(e,e.index),e>=t?0:t-e}function Pn(e,t){let n;return Date.now()-((n=e.h[t])!=null?n:-1*e.g)}var Nn=class{constructor(e){this.g=e,this.h=[],this.index=0}},In=class extends c{},Wr=[2,3],Gr=class extends c{},f=class extends Error{constructor({errorType:e,message:t,i:n}){super(`Meet Add-on SDK error: ${`${t}${n?` - ${n}`:""}`}`),this.errorType=e}},B={errorType:"InternalError",message:"An unexpected error has occurred.",i:"No further information is available."},jn={errorType:"MissingUrlParameter",message:"Missing required Meet SDK URL parameter",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not strip URL parameters (e.g. as part of a redirect)."},Un={errorType:"NeedsMainStageContext",message:"This method can only be invoked if the addon is running in the main stage.",i:"Use getFrameType to check whether the addon is running in the main stage before invoking this method."},Kr={errorType:"NeedsSidePanelContext",message:"This method can only be invoked if the addon is running in the side panel.",i:"Use getFrameType to check whether the addon is running in the side panel before invoking this method."},Yr={errorType:"NotSupportedInStandalone",message:"This method is not supported in standalone mode.",i:"Do not call this method in standalone mode."},Vr={errorType:"InternalError",message:"The frame type URL parameter is set to an unexpected value.",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect)."},qr={errorType:"InvalidCloudProjectNumber",message:"Cloud Project Number provided by meet does not match the one passed in by the SDK. Ensure that the correct Cloud Project Number is passed to the SDK as a string.",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect) and ensure that the correct Cloud Project Number was passed into the SDK as a string."},Hr={errorType:"DestinationNotReady",message:"The recipient frame is not connected via the addon SDK and cannot receive the notification.",i:"Make sure the destination frame has connected before sending messages to it."},Xr={errorType:"InvalidActivityStartingState",message:"Origin of the ActivityStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.",i:"Ensure that the ActivityStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest."},Qr={errorType:"ActivityStartingStateMissingAttributes",message:"The supplied ActivityStartingState object does not contain any recognized attributes.",i:"Ensure that the ActivityStartingState object contains at least one of the following attributes: mainStageUrl, sidePanelUrl, additionalData."},Zr={errorType:"ActivityStartingStateUnrecognizedAttributes",message:"The supplied ActivityStartingState object contains attributes that are not recognized.",i:"Ensure that the ActivityStartingState object has only the following attributes: mainStageUrl, sidePanelUrl, additionalData."},ei={errorType:"AddonStartingStateMissingAttributes",message:"The supplied AddonStartingState object does not contain any recognized attributes.",i:"Ensure that the AddonStartingState object contains at least one of the following attributes: sidePanelUrl, additionalData."},ti={errorType:"AddonStartingStateUnrecognizedAttributes",message:"The supplied AddonStartingState object contains attributes that are not recognized.",i:"Ensure that the AddonStartingState object has only the following attributes: sidePanelUrl, additionalData."},ht=e=>({errorType:"ArgumentNullError",message:`The argument supplied for '${e}' was 'null' but a value was expected.`,i:"Ensure you are passing a value of the expected type for the argument."}),M=(e,t,n)=>({errorType:"ArgumentTypeError",message:`The type '${t}' of argument supplied for '${e}' did not match the expected type '${n}'.`,i:"Ensure the type of the argument provided matches the expected type."}),Mn=e=>({errorType:"InternalError",message:`Could not connect to ${e} channel. Unknown error`,i:"No further information is available."}),ni={errorType:"ActivityIsOngoing",message:"Operation cannot be performed while an activity is ongoing.",i:"Ensure that no activity is ongoing."},ri={errorType:"InternalError",message:"Frame message missing required Meet SDK command.",i:"Send one of the available commands in the frame message."},ii={errorType:"NoActivityFound",message:"No activity found.",i:"Ensure that the activity is started before performing this operation."},oi={errorType:"RequiresEapEnrollment",message:"This feature is only available to early access partners.",i:"Meet add-on early access enrollment is currently closed."},si={errorType:"UserNotInitiator",message:"Operation cannot be performed because the user is not the initiator of the current activity.",i:"Ensure that the user is the initiator of the current activity or that the activity has ended."},ai={errorType:"SizeLimitExceededActivityStartingState",message:"The size of the activityStartingState URLs and/or its data exceed the limits allowed.",i:"Ensure that the activityStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters."},li={errorType:"SizeLimitExceededFrameToFrameMessage",message:"The size of the frame to frame message exceeds the limits allowed.",i:"Ensure that the frame to frame message size is less than 1,000,000 characters."},ci={errorType:"AddonSessionAlreadyCreated",message:"The addon session has already been created.",i:"Only instantiate the AddonSession once."},ui={errorType:"UserCancelled",message:"The user cancelled starting an activity.",i:"The user needs to click continue to start the activity."},fi={errorType:"NotSupportedInMeetCall",message:"This method is not supported during a Meet call.",i:"Do not call this method during a Meet call."},di={errorType:"InvalidAddonStartingState",message:"Origin of the AddonStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.",i:"Ensure that the AddonStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest."},hi={errorType:"SizeLimitExceededAddonStartingState",message:"The size of the AddonStartingState URLs and/or its data exceed the limits allowed.",i:"Ensure that the AddonStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters."},gi={errorType:"MeetingPolicyPreventsStartingActivity",message:"A meeting policy (such as using host control settings) prevents the user from starting the activity.",i:"Have a meeting host or administrator modify the necessary settings to allow the current user to start the activity."};function yi(e){switch(e){case 0:return B;case 1:return Hr;case 2:return Xr;case 3:return ni;case 4:return ri;case 5:return oi;case 6:return Yr;case 7:return si;case 8:return ai;case 9:return li;case 10:return ui;case 11:return fi;case 12:return di;case 13:return hi;case 14:return ii;case 15:return gi;default:return B}}function pi(e){let t;var n=(t=k(e,1))!=null?t:0;switch(e=mi(D(e,Wr)),n){case 1:return{errorType:"InternalError",message:`Could not connect to ${e} channel. Meet did not respond with a MessagePort.`,i:"No further information is available."};case 2:return{errorType:"InternalError",message:`Could not connect to ${e}. A conflicting ${e} exists.`,i:"No further information is available."};case 3:return{errorType:"InternalError",message:`Could not connect to ${e} channel. The addon does not have permission to open a ${e}.`,i:"This method might require EAP enrollment."};case 4:return{errorType:"InternalError",message:`Could not connect to ${e} channel. The addon is not authorized for this ${e}.`,i:"No further information is available."};case 0:return Mn(e);case 5:e:switch(e){case"co":n={errorType:"InternalError",message:`Could not connect to ${e} channel. The coActivity was not found.`,i:`Consider starting the ${e} only after after the startActivity promise returns.`};break e;default:n={errorType:"InternalError",message:`Could not connect to ${e} channel.`,i:"No further information is available."}}return n;default:return Mn(e)}}function mi(e){switch(e){case 2:return"co";case 3:return"gd";case 0:return"unknown";default:return"unknown"}}function ee({errorType:e,message:t,i:n},r=""){throw new f({errorType:e,message:r?`${t} ${r}`:t,i:n})}function Ce(e,t){ee({...jn,message:`${jn.message}: ${e}. In URL ${t}`})}function gt(e){var t=new Cn;return g(t,1,O(e),0)}function yt(e,t){return g(e,2,R(t),"")}function pt(e,t){return g(e,3,R(t),"")}var Cn=class extends c{getFrameType(){return k(this,1)}};function bn(e){var t;Tr===void 0?t=2:t=4;var n=e.m[u],r=n,i=!(2&n),s=Cn;e=e.m,t=(n=!!(2&r))?1:t,i&&(i=!n),n=V(e,r,1),n=Array.isArray(n)?n:tn;var o=n[u]|0,l=!!(4&o);if(!l){var a=o;a===0&&(a=Ue(a,r)),o=n,a|=1;var p=r;const Le=!!(2&a);Le&&(p|=2);let Dt=!Le,Lt=!0,$e=0,$t=0;for(;$e<o.length;$e++){const Ft=hn(o[$e],s,p);if(Ft instanceof s){if(!Le){const pr=!!((Ft.m[u]|0)&2);Dt&&(Dt=!pr),Lt&&(Lt=pr)}o[$t++]=Ft}}$t<$e&&(o.length=$t),a|=4,a=Lt?a|16:a&-17,a=Dt?a|8:a&-9,o[u]=a,Le&&Object.freeze(o),o=a}if(i&&!(8&o||!n.length&&(t===1||t===4&&32&o))){for(H(o)&&(n=fe(n),o=Ue(o,r),r=S(e,r,1,n)),i=n,s=o,o=0;o<i.length;o++)a=i[o],p=ot(a),a!==p&&(i[o]=p);s|=8,s=i.length?s&-17:s|16,o=i[u]=s}let v;if(t===1||t===4&&32&o){if(!H(o)){r=o;var A=!!(32&o);o|=!n.length||16&o&&(!l||A)?2:2048,o!==r&&(n[u]=o),Object.freeze(n)}}else l=t!==5?!1:!!(32&o)||H(o)||!!gn(n),(t===2||l)&&H(o)&&(n=fe(n),o=Ue(o,r),o=ut(o,r,!1),n[u]=o,r=S(e,r,1,n)),H(o)||(e=o,o=ut(o,r,!1),o!==e&&(n[u]=o)),l?v=br(n):t===2&&((A=je)==null||A.delete(n));return v||n}function On(e){var t=new Rn;return An(t,e)}var Rn=class extends c{},vi=class extends c{};function mt(e){var t=new wi;return g(t,1,O(e),0)}var wi=class extends c{},Si=class extends c{},Ai=class extends c{},xi=class extends c{},Ei=class extends c{getMeetingInfo(){return y(this,xi,3,vt)}getMeetPlatformInfo(){return y(this,Ai,4,vt)}},vt=[2,3,4,5],be=class extends c{},te=[1,4,5,6,7,8,9,10,11,12,13,14,15,16,17],Ti=class extends c{},Pi=class extends c{},Ni=new Map([[2,"MAIN_STAGE"],[1,"SIDE_PANEL"]]),Ii=new Map([[0,"UNKNOWN"],[1,"OPEN_ADDON"],[2,"START_ACTIVITY"],[3,"JOIN_ACTIVITY"]]);function ji(e){e&&typeof e.dispose=="function"&&e.dispose()}function L(){this.s=this.s,this.g=this.g}L.prototype.s=!1,L.prototype.dispose=function(){this.s||(this.s=!0,this.G())},L.prototype[Symbol.dispose]=function(){this.dispose()};function _n(e,t){e.s?t():(e.g||(e.g=[]),e.g.push(t))}L.prototype.G=function(){if(this.g)for(;this.g.length;)this.g.shift()()};function Dn({J:e,R:t}){if(e===null)throw new f(ht("activityStartingState"));if(t||e!==void 0){if(typeof e!="object")throw new f(M("activityStartingState",typeof e,`object${t?"":" | undefined"}`));if(e.mainStageUrl!==void 0&&typeof e.mainStageUrl!="string")throw new f(M("mainStageUrl",typeof e.mainStageUrl,"string | undefined"));if(e.sidePanelUrl!==void 0&&typeof e.sidePanelUrl!="string")throw new f(M("sidePanelUrl",typeof e.sidePanelUrl,"string | undefined"));if(e.additionalData!==void 0&&typeof e.additionalData!="string")throw new f(M("additionalData",typeof e.additionalData,"string | undefined"));if(Object.keys(e).length!==+!!e.mainStageUrl+ +!!e.sidePanelUrl+ +!!e.additionalData)throw new f(Zr);if(Object.keys(e).length===0)throw new f(Qr)}}function Ln(e){const t=[];return t.push(pt(yt(gt(2),e.mainStageUrl),e.additionalData)),t.push(pt(yt(gt(1),e.sidePanelUrl),e.additionalData)),t}var wt=class extends L{constructor(e){super(),this.context=e,this.h={},ye(this.context.g.U,t=>{switch(D(t.content,te)){case 7:const r=this.h.frameToFrameMessage;if(t=y(t.content,Si,7,te),r&&t){var n=k(t,1);if(n=Ni.get(n),n===void 0)throw Error("Unknown frame type.");r({originator:n,payload:E(t,2)})}}})}async getMeetingInfo(){const e=await Ct(this.context.g,mt(2));return{meetingId:E(e.getMeetingInfo(),1),meetingCode:E(e.getMeetingInfo(),2)}}async getFrameOpenReason(){let e;const t=(e=this.context.h.ca)!=null?e:0;let n;return(n=Ii.get(t))!=null?n:"UNKNOWN"}async getActivityStartingState(){var e=y(await Ct(this.context.g,mt(1)),Rn,2,vt);const t=e==null?void 0:bn(e).find(n=>n.getFrameType()===2);return e=e==null?void 0:bn(e).find(n=>n.getFrameType()===1),{mainStageUrl:(t==null?void 0:E(t,2))||void 0,sidePanelUrl:(e==null?void 0:E(e,2))||void 0,additionalData:(e==null?void 0:E(e,3))||void 0}}async setActivityStartingState(e){Dn({J:e,R:!0});var t=Ln(e);e=yo;var n=this.context.g,r=new Ti;t=On(t),r=X(r,1,t),await e(n,r)}on(e,t){this.h[e]=t}async getMeetPlatformInfo(){const e=await Ct(this.context.g,mt(3));return{isMeetHardware:Q(cn(_(e.getMeetPlatformInfo(),1)),!1)}}async closeAddon(){await po(this.context.g)}async startActivity(e){Dn({J:e,R:!1});const t=new Pi;e&&(e=Ln(e),e=On(e),X(t,1,e)),await mo(this.context.g,t)}async endActivity(e){var t=vo,n=this.context.g,r=new vi;e=g(r,1,O(e==="aab61ee0-51b4-475d-aa4d-849f2498640d"?999:0),0),await t(n,e)}},Ui=Me(class extends c{getFrameOpenReason(){return k(this,5)}});function St(){var e=window.location.href,t=window.location.href,n=new URL(t).searchParams.get("meet_sdk");if(n?t=Ui(atob(n)):(Ce("meet_sdk",t),t=void 0),(n=E(t,1))||Ce("meet_addon_frame_type",e),n=Number(n),n!==2&&n!==1)throw new f(Vr);const r=E(t,2);r||Ce("meet_control_channel_name",e);const i=E(t,4);i||Ce("addon_cloud_project_number",e);var s;return e=(s=t.getFrameOpenReason())!=null?s:0,s=E(t,3)||"https://meet.google.com",{ca:e,frameType:n,ba:r,cloudProjectNumber:i,S:s}}var Mi=class extends c{},Ci=class extends c{};function bi(){var e=new Oi,t=new Ci;return h(e,1,Ri,t)}var Oi=class extends c{},Ri=[1,2];function _i(e){var t=new Li;return X(t,2,e)}function Di(e,t){return g(e,3,R(t),"")}var Li=class extends c{},$i=class extends c{},Fi=class extends c{},ki=class extends c{},Bi=class extends c{},zi=class extends c{setAddonStartingState(e){return X(this,1,e)}},Ji=class extends c{};function Wi(e,t){return h(e,2,P,t)}var T=class extends c{},P=[1,2,5,6,7,8,9,10,11,13,14,15,16],$n=class extends c{},Oe=Me($n),ne=[1,2];class Gi{constructor(t,n){this.data=t,this.channel=n}}var Ki=Promise;function Fn(e){const t=new MessageChannel;return kn(t.port1,e),t}function At(e,t){return kn(e,t),new Yi(e)}class Yi{constructor(t){this.g=t}send(t,n,r=[]){n=Fn(n),this.g.postMessage(t,[n.port2].concat(r))}C(t,n){return new Ki(r=>{this.send(t,r,n)})}}function kn(e,t){t&&(e.onmessage=n=>{var r=n.data;n=At(n.ports[0]),t(new Gi(r,n))})}var xt=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function Bn(e,t){e.l(t),e.h<100&&(e.h++,t.next=e.g,e.g=t)}class zn{constructor(t,n){this.j=t,this.l=n,this.h=0,this.g=null}get(){let t;return this.h>0?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.j(),t}}function Vi(){var e=Wn;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class qi{constructor(){this.h=this.g=null}add(t,n){const r=Jn.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Jn=new zn(()=>new Hi,e=>e.reset());class Hi{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}let Et,Tt=!1,Wn=new qi,Pt=(e,t)=>{Et||Xi(),Tt||(Et(),Tt=!0),Wn.add(e,t)},Xi=()=>{const e=Promise.resolve(void 0);Et=()=>{e.then(Qi)}};function Qi(){let e;for(;e=Vi();){try{e.h.call(e.g)}catch(t){Y(t)}Bn(Jn,e)}Tt=!1}function Gn(){}function C(e){if(this.g=0,this.T=void 0,this.l=this.h=this.j=null,this.v=this.B=!1,e!=Gn)try{const t=this;e.call(void 0,function(n){re(t,2,n)},function(n){re(t,3,n)})}catch(t){re(this,3,t)}}function Kn(){this.next=this.context=this.h=this.l=this.g=null,this.j=!1}Kn.prototype.reset=function(){this.context=this.h=this.l=this.g=null,this.j=!1};var Yn=new zn(function(){return new Kn},function(e){e.reset()});function Nt(e,t,n){const r=Yn.get();return r.l=e,r.h=t,r.context=n,r}function Zi(){let e,t;const n=new C(function(r,i){e=r,t=i});return new ro(n,e,t)}C.prototype.then=function(e,t,n){return eo(this,xt(typeof e=="function"?e:null),xt(typeof t=="function"?t:null),n)},C.prototype.$goog_Thenable=!0;function Vn(e,t){t=xt(t),t=Nt(t,t),t.j=!0,It(e,t)}C.prototype.cancel=function(e){if(this.g==0){const t=new b(e);Pt(function(){qn(this,t)},this)}};function qn(e,t){if(e.g==0)if(e.j){var n=e.j;if(n.h){var r=0,i=null,s=null;for(let o=n.h;o&&(o.j||(r++,o.g==e&&(i=o),!(i&&r>1)));o=o.next)i||(s=o);i&&(n.g==0&&r==1?qn(n,t):(s?(r=s,r.next==n.l&&(n.l=r),r.next=r.next.next):Xn(n),Qn(n,i,3,t)))}e.j=null}else re(e,3,t)}function It(e,t){e.h||e.g!=2&&e.g!=3||Hn(e),e.l?e.l.next=t:e.h=t,e.l=t}function eo(e,t,n,r){const i=Nt(null,null,null);return i.g=new C(function(s,o){i.l=t?function(l){try{const a=t.call(r,l);s(a)}catch(a){o(a)}}:s,i.h=n?function(l){try{const a=n.call(r,l);a===void 0&&l instanceof b?o(l):s(a)}catch(a){o(a)}}:o}),i.g.j=e,It(e,i),i.g}C.prototype.ma=function(e){this.g=0,re(this,2,e)},C.prototype.na=function(e){this.g=0,re(this,3,e)};function re(e,t,n){if(e.g==0){e===n&&(t=3,n=new TypeError("Promise cannot resolve to itself")),e.g=1;e:{var r=n,i=e.ma,s=e.na;if(r instanceof C){It(r,Nt(i||Gn,s||null,e));var o=!0}else{if(r)try{var l=!!r.$goog_Thenable}catch{l=!1}else l=!1;if(l)r.then(i,s,e),o=!0;else{if(l=typeof r,l=="object"&&r!=null||l=="function")try{const a=r.then;if(typeof a=="function"){to(r,a,i,s,e),o=!0;break e}}catch(a){s.call(e,a),o=!0;break e}o=!1}}}o||(e.T=n,e.g=t,e.j=null,Hn(e),t!=3||n instanceof b||no(e,n))}}function to(e,t,n,r,i){function s(a){l||(l=!0,r.call(i,a))}function o(a){l||(l=!0,n.call(i,a))}let l=!1;try{t.call(e,o,s)}catch(a){s(a)}}function Hn(e){e.B||(e.B=!0,Pt(e.la,e))}function Xn(e){let t=null;return e.h&&(t=e.h,e.h=t.next,t.next=null),e.h||(e.l=null),t}C.prototype.la=function(){let e;for(;e=Xn(this);)Qn(this,e,this.g,this.T);this.B=!1};function Qn(e,t,n,r){if(n==3&&t.h&&!t.j)for(;e&&e.v;e=e.j)e.v=!1;if(t.g)t.g.j=null,Zn(t,n,r);else try{t.j?t.l.call(t.context):Zn(t,n,r)}catch(i){er.call(null,i)}Bn(Yn,t)}function Zn(e,t,n){t==2?e.l.call(e.context,n):e.h&&e.h.call(e.context,n)}function no(e,t){e.v=!0,Pt(function(){e.v&&er.call(null,t)})}var er=Y;function b(e){ae.call(this,e)}K(b,ae),b.prototype.name="cancel";function ro(e,t,n){this.promise=e,this.resolve=t,this.reject=n}let io=1,ge=new WeakMap;function Re(e,t,n){var r=oo;e.h.has(t),r(t,n)}var jt=class extends L{constructor(){super(),this.h=new Set}signal(){const e=new ao;return this.h.add(e),_n(this,w(ji,e)),e}};function oo(e,t){return new Promise(n=>{ie(()=>{e.L&&(e.ea=t,e.P=!0);for(const{I:r,slot:i}of e.o.values())try{i(t,{signal:e,I:r})}catch(s){Y(s)}for(const r of e.A)r.resolve(t);e.A.clear(),n()})})}function ye(e,t,n){const r=io++;return ie(()=>{so(e,r,t,n)}),r}function so(e,t,n,r){if(!e.s)if(r){if(!r.s){const i=()=>{ie(()=>{e.o.delete(t);const s=ge.get(r);s&&Jt(s,i)})};e.o.set(t,{I:t,slot:n,F:i}),nr(r,i)}}else e.o.set(t,{I:t,slot:n,F:()=>e.o.delete(t)})}var ao=class extends L{constructor(){super(),this.L=!1,this.o=new Map,this.A=new Set,this.P=!1}detach(e){ie(()=>{const t=this.o.get(e);t&&t.F()})}value(e){return this.promise(!0,e)}next(e){return this.promise(!1,e)}promise(e,t){const n=Zi();return ie(()=>{if(this.s)n.reject(new b("Signal initially disposed"));else if(t&&t.s)n.reject(new b("Owner initially disposed"));else if(e&&this.L&&this.P)n.resolve(this.ea);else if(this.A.add(n),Vn(n.promise,()=>{this.A.delete(n)}),t){const r=()=>{n.reject(new b("Owner asynchronously disposed"))};Vn(n.promise,()=>{const i=ge.get(t);i&&Jt(i,r)}),nr(t,r)}}),n.promise}G(){super.G(),ie(()=>{for(const{F:e}of this.o.values())e();this.o.clear();for(const e of this.A)e.reject(new b("Signal asynchronously disposed"));this.A.clear()})}};const pe=[];let Ut=!1;function ie(e){pe.push(e),lo()}async function lo(){if(!Ut)try{Ut=!0;let e=tr(0);for(;e<pe.length;)await Promise.resolve(),e=tr(e)}catch(e){Y(e)}finally{pe.length=0,Ut=!1}}function tr(e){const t=e+100;for(;e<t&&e<pe.length;)try{pe[e++]()}catch(n){Y(n)}return e}function nr(e,t){if(e.s)t();else{var n=ge.get(e);if(n)n.push(t);else{const r=[t];ge.set(e,r),_n(e,()=>{for(const i of[...r])i();ge.delete(e)})}}}function N(e){var t=new $n;return e=h(t,1,ne,e),{content:ft(e)}}const rr=new jt;function co(e,t){const n=rr.signal();return{channel:At(e,r=>{const i=t(r.data);Re(rr,n,{content:i,ka:r})}),signal:n}}let ir;var z=class extends c{},J=class extends c{},Mt=class extends c{h(){return y(this,z,2,_e)}g(){return q(this,z,2,_e)}j(){return y(this,J,3,_e)}l(){return q(this,J,3,_e)}},_e=[2,3],uo=Me(class extends c{}),fo=Me(class extends c{}),De=[1,2],ho=({destination:e,origin:t,ra:n,Y:r="ZNWN1d",onMessage:i})=>{if(t==="*")throw Error("Sending to wildcard origin not allowed.");const s=Fn(i);return e.postMessage(n?{n:r,t:n}:r,t,[s.port2]),At(s.port1,i)};function go(e,t,n){const r=new jt,i=r.signal();return e=ho({destination:window.parent,origin:t,Y:e,onMessage:s=>{const o=Oe(s.data.content);D(o,ne)===2&&Re(r,i,{content:y(o,be,2,ne),ka:s,messagePort:s.data.messagePort})}}),new To(i,e,n)}async function Ct(e,t){var n=j,r=new T;t=h(r,9,P,t),e=await n(e,N(t));let i;return(i=y(Oe(e.data.content),be,2,ne))==null?void 0:y(i,Ei,9,te)}async function yo(e,t){var n=j,r=new T;t=h(r,8,P,t),await n(e,N(t))}async function po(e){var t=j,n=new T,r=new Mi;n=h(n,11,P,r),await t(e,N(n))}async function mo(e,t){var n=j,r=new T;t=h(r,14,P,t),await n(e,N(t))}async function vo(e,t){var n=j,r=new T;t=h(r,15,P,t),await n(e,N(t))}async function wo(e){await e.h()}async function j(e,t){(e=await e.channel.C(t))||ee(B,`Falsy response received from the message channel. ${JSON.stringify(e)}`),(t=e.data)||ee(B,`Data field in the response from the message channel is falsy. ${JSON.stringify(t)}`),(t=t.content)||ee(B,`Content field in the response from the message channel is falsy. ${JSON.stringify(t)}`);let n;try{n=Oe(t)}catch(r){ee(B,`The ControlMessage can't be deserialized. ${JSON.stringify(t)}. ${JSON.stringify(r)}`)}if((t=y(n,be,2,ne))||ee(B,`MeetToAddonMessage field on ControlMessage is falsy. ${JSON.stringify(t)}`),t=t==null?void 0:y(t,Gr,10,te),(t==null?void 0:k(t,1))!==void 0)throw new f(yi(k(t,1)));return e}async function So(e,t,n){var r=j,i=new T;t=h(i,1,P,t),r=await r(e,N(t)),e=r.data.messagePort;var s;return(r=(s=y(Oe(r.data.content),be,2,ne))==null?void 0:y(s,In,1,te))!=null?s=r:(s=new In,s=g(s,1,O(0),0)),{channel:e?co(e,n):void 0,response:s}}async function or(e){const t=bi(),{channel:n,response:r}=await So(e,t,i=>fo(i));if(!n)throw new f(pi(r));return n}async function Ao(e){var t=j,n=new T,r=new Ji;n=h(n,5,P,r),await t(e,N(n))}async function xo(e){var t=j,n=new T,r=new $i;n=h(n,6,P,r),await t(e,N(n))}async function sr(e,t,n){var r=j,i=new T,s=new Fi;t=g(s,1,O(t),0),n=g(t,2,R(n),""),i=h(i,7,P,n),await r(e,N(i))}async function Eo(e,t){var n=j,r=new T;t=h(r,16,P,t),await n(e,N(t))}class To extends L{constructor(t,n,r){super(),this.U=t,this.channel=n,this.h=zr(async()=>{var i=this.channel,s=i.C,o=new T,l=new ki;o=h(o,13,P,l),await s.call(i,N(o))}),t=Fr(),E(t,4),Ze(_(t,1)),Ze(_(t,2)),Ze(_(t,3)),r=Wi(new T,Di(_i(t),r)),this.channel.send(N(r)),ye(this.U,async i=>{switch(D(i.content,te)){case 16:await wo(this)}})}}let bt;var Po=class{constructor(e){var t=bt;this.h=e,this.g=t}delete(){throw Error("Not implemented.")}},No=class extends c{h(){return y(this,z,2,oe)}g(){return q(this,z,2,oe)}j(){return y(this,J,3,oe)}l(){return q(this,J,3,oe)}},oe=[2,3],Io=class extends c{},jo=class extends c{},Uo=class extends c{},Mo=class extends c{h(){return y(this,z,2,se)}g(){return q(this,z,2,se)}j(){return y(this,J,3,se)}l(){return q(this,J,3,se)}},se=[2,3],ar=[5,6],Co=class extends c{},Ot=class extends c{},Rt=[1,2,3],bo=class extends Error{constructor(){super("Failed to create CoActivity: Connection refused - Meet refused to begin Live Sharing")}},Oo=class{constructor(e){this.config=e}start(){return this.g!=null||(this.g=setInterval(()=>{this.config.ha()},this.config.da)),this}shutdown(){clearInterval(this.g)}};function _t(){const e=new Map,t={set(n,r){return e.set(n,r),t},D:()=>e};return t}function Ro(e){if(e.g()){e=e.h().m;var t=e[u],n=V(e,t,1),r=en(n,!0);if(r!=null&&r!==n&&S(e,t,1,r),e=r,t=e??xe(),e=Uint8Array,Yt(ce),n=t.g,n!=null&&!We(n))if(typeof n=="string"){Gt.test(n)&&(n=n.replace(Gt,Ar)),n=atob(n),r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);n=r}else n=null;return t=n==null?n:t.g=n,{bytes:new e(t||0)}}}function _o(e,t){return t=lr(t),h(e,2,se,t),e}function Do(e,t){return t=lr(t),h(e,2,oe,t),e}function lr(e){var t=new z;return g(t,1,en(e.bytes,!1),xe())}function Lo(e){if(e.l()){e=e.j();var t,n,r=E(e,1),i=(n=(t=ct(e,En,2))==null?void 0:xn(t))!=null?n:0;n=e.m;let s=n[u];const o=V(n,s,4);return t=o==null||typeof o=="number"?o:o==="NaN"||o==="Infinity"||o==="-Infinity"?Number(o):void 0,t!=null&&t!==o&&S(n,s,4,t),{mediaId:r,mediaPlayoutPosition:i,mediaPlayoutRate:Q(t,0),playbackState:ko.get(k(e,3))}}}function $o(e,t){return t=cr(t),h(e,3,se,t),e}function Fo(e,t){return t=cr(t),h(e,3,oe,t),e}const ko=_t().set(0,"INVALID").set(1,"BUFFERING").set(2,"PLAY").set(3,"PAUSE").set(4,"ENDED").D(),Bo=_t().set("INVALID",0).set("BUFFERING",1).set("PLAY",2).set("PAUSE",3).set("ENDED",4).D();function cr(e){var t=new J;t=g(t,1,R(e.mediaId),"");var n=e.mediaPlayoutRate;if(n!=null&&typeof n!="number")throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);return t=g(t,4,n,0),n=new En,n=g(n,1,et(e.mediaPlayoutPosition),"0"),t=X(t,2,n),e=Bo.get(e.playbackState),g(t,3,O(e),0)}function zo({activityTitle:e}){var t=new Uo;return st(t,4,R(e))}function Jo(e,t){var n=new jo;return t=g(n,1,O(t.u),0),h(e,6,ar,t),e}function Wo(e){var t=new Io;return h(e,5,ar,t),e}const Go=_t().set("co-doing",1).set("co-watching",2).D();async function ur(e,t,n){var r=t.C,i=new Ot,s=new Co;s=g(s,1,R(e.activityTitle),"");var o=Go.get(e.K);s=g(s,2,O(o),0),i=h(i,3,Rt,s),r=await r.call(t,i,uo);let l;if((l=Q(cn(_(r,1)),!1))!=null&&l)return new Ko(e,t,n,ct(r,Mt,2));throw new bo}function fr(e,t){const n=e.config.N(t);n&&!e.config.M(e.g,n)&&(e.g=n,e.j=xn(t),e.v(e.g))}function W(e,t){const{state:n,fa:r,context:i}=t(e.g);e.g=n,e.notify(e.g,i,r)}class Ko{constructor(t,n,r,i){this.l=t,this.h=n,this.config=r,this.v=Br(s=>void this.l.O(s)),Xo(this.h,s=>{const o=D(s,De);switch(o){case 1:fr(this,y(s,Mt,1,De));break;case 2:case 0:console.warn(`IllegalMessage: ${o} - Unhandled message - Please raise a bug with the MeetJS team`)}}),this.B=new Oo({da:1e3,ha:()=>{var s,o,l=(o=(s=this.l).ja)==null?void 0:o.call(s);if(this.g!==null){this.g={...this.g,...l},s=new Ot,o=this.config,l=o.W;var a=new No;a=g(a,1,et(this.j),"0"),o=l.call(o,a,this.g),s=h(s,1,Rt,o),this.h.send(s)}}}).start(),this.g=null,this.j=0,i&&fr(this,i)}disconnect(){this.h.shutdown(),this.B.shutdown()}notify(t,n,r){var i=r?zo(r):void 0;r=this.config;var s=r.X,o=new Mo;o=g(o,1,et(this.j),"0"),i=X(o,4,i),t=s.call(r,i,t),t=this.config.V(t,n),n=this.h,r=n.send,s=new Ot,t=h(s,2,Rt,t),r.call(n,t)}}var Yo=class{constructor(e){this.g=e}broadcastStateUpdate(e){W(this.g,()=>({state:e,context:{}}))}disconnect(){this.g.disconnect()}};function Vo(e,t){return e==null||t==null?!1:e.bytes.length===t.bytes.length&&e.bytes.every((n,r)=>n===t.bytes[r])}var qo=class{constructor(e){this.g=e}notifySwitchedToMedia(e,t,n){W(this.g,()=>({state:{mediaId:t,mediaPlayoutRate:1,mediaPlayoutPosition:n,playbackState:"PLAY"},fa:{activityTitle:e},context:{u:1}}))}notifyPauseState(e,t){W(this.g,n=>{if(n==null)throw Error("Invalid before coWatchingState");return{state:{...n,playbackState:e?"PAUSE":"PLAY",mediaPlayoutPosition:t},context:{u:3}}})}notifySeekToTimestamp(e){W(this.g,t=>{if(t==null)throw Error("Invalid before coWatchingState");return{state:{...t,mediaPlayoutPosition:e},context:{u:2}}})}notifyPlayoutRate(e){W(this.g,t=>{if(t==null)throw Error("Invalid before coWatchingState");return{state:{...t,mediaPlayoutRate:e},context:{u:4}}})}notifyBuffering(e){W(this.g,t=>{if(t==null)throw Error("Invalid before coWatchingState");return{state:{...t,mediaPlayoutPosition:e,playbackState:"BUFFERING"},context:{u:3}}})}notifyReady(e){W(this.g,t=>{if(t==null)throw Error("Invalid before coWatchingState");return{state:{...t,mediaPlayoutPosition:e},context:{u:3}}})}disconnect(){this.g.disconnect()}};function Ho(e,t){if(e==null||t==null)return!1;const n=e.playbackState==="PLAY"?3*Math.max(e.mediaPlayoutRate,1):0,r=Math.abs(e.mediaPlayoutPosition-t.mediaPlayoutPosition);return e.mediaId===t.mediaId&&e.mediaPlayoutRate===t.mediaPlayoutRate&&r<=n&&e.playbackState===t.playbackState}function Xo(e,t){const n=ye(e.signal,r=>{t(r)});e.o.push(n)}var dr=class{constructor(e,t){this.channel=e,this.signal=t,this.o=[]}send(e){this.channel.send(ft(e))}async C(e,t){return e=await this.channel.C(ft(e)),t(e.data)}shutdown(){this.o.forEach(e=>{this.signal.detach(e)})}};function Qo(e,t){var n=ns;const r=e.signal(),i=e.signal();return ye(t,s=>{const o=n(s)?r:i;Re(e,o,s)},e),{ia:r,ga:i}}function Zo(e,t,n,r=i=>i){ye(n,i=>{Re(e,t,r(i))},e)}async function es(e,t){if(t)return e=await ur({activityTitle:t.activityTitle,K:"co-watching",ja:()=>t.onCoWatchingStateQuery(),O:n=>{t.onCoWatchingStateChanged(n)}},e,{X:$o,W:Fo,V:Jo,N:Lo,M:Ho}),new qo(e)}async function ts(e,t){if(t)return e=await ur({activityTitle:t.activityTitle,K:"co-doing",O:n=>{t.onCoDoingStateChanged(n)}},e,{X:_o,W:Do,V:Wo,N:Ro,M:Vo}),new Yo(e)}async function hr(e){const t=new jt,n=t.signal();e=await e,Zo(t,n,e.signal,s=>s.content);const{ia:r,ga:i}=Qo(t,n);return{Z:new dr(e.channel,r),aa:new dr(e.channel,i)}}function ns(e){e:switch(D(e,De)){case 1:e=y(e,Mt,1,De);break e;default:throw Error("CA Message arrived with no known content message set")}return e.g()}async function rs(e,t){if({Z:e}=await hr(or(e.g)),t=await ts(e,t),!t)throw Error("Failed to create co-doing session");return t}async function is(e,t){if({aa:e}=await hr(or(e.g)),t=await es(e,t),!t)throw Error("Failed to create co-watching session");return t}var os=class extends wt{async notifySidePanel(e){await sr(this.context.g,1,e)}async unloadSidePanel(){await Ao(this.context.g)}async loadSidePanel(){await xo(this.context.g)}},ss=class extends wt{async setAddonStartingState(e){if(e===null)throw new f(ht("addonStartingState"));if(typeof e!="object")throw new f(M("addonStartingState",typeof e,"object | undefined"));if(e.sidePanelUrl!==void 0&&typeof e.sidePanelUrl!="string")throw new f(M("sidePanelUrl",typeof e.sidePanelUrl,"string | undefined"));if(e.additionalData!==void 0&&typeof e.additionalData!="string")throw new f(M("additionalData",typeof e.additionalData,"string | undefined"));if(Object.keys(e).length!==+!!e.sidePanelUrl+ +!!e.additionalData)throw new f(ti);if(Object.keys(e).length===0)throw new f(ei);var t=[];t.push(pt(yt(gt(1),e.sidePanelUrl),e.additionalData)),e=this.context.g;var n=new zi,r=n.setAddonStartingState,i=new Bi;t=An(i,t),await Eo(e,r.call(n,t))}},as=class extends wt{async notifyMainStage(e){await sr(this.context.g,2,e)}},ls=class{constructor(e){e=e.cloudProjectNumber;const t=St();if(t.cloudProjectNumber!==e)throw new f(qr);const n=t.S,r=t.ba;let i;bt=(i=bt)!=null?i:go(r,n,e),this.g=new Po(t)}async createMainStageClient(){var e=this.g;if(e.h.frameType!==2)throw new f(Un);return await Promise.resolve(new os(e))}async createSidePanelClient(){var e=this.g;if(e.h.frameType!==1)throw new f(Kr);return await Promise.resolve(new as(e))}async createCoWatchingClient(e){return await is(this.g,e)}async createCoDoingClient(e){return await rs(this.g,e)}async createRoomsStandaloneClient(){var e=this.g;if(e.h.frameType!==2)throw new f(Un);return await Promise.resolve(new ss(e))}};let gr=null;var yr={addon:{getFrameType:function(){e:{var e=St().frameType;switch(e){case 2:e="MAIN_STAGE";break e;case 1:e="SIDE_PANEL";break e;default:throw Error(`Unknown frame type: ${e}`)}}return e},createAddonSession:async function(e){if(e===null)throw new f(ht("config"));if(typeof e!="object")throw new f(M("config",typeof e,"object"));if(typeof e.cloudProjectNumber!="string")throw new f(M("cloudProjectNumber",typeof e.cloudProjectNumber,"string"));if(gr&&St().S!=="integration.test.google.com")throw new f(ci);return gr=new ls(e)}}},me=["meet"],U=d;me[0]in U||typeof U.execScript>"u"||U.execScript("var "+me[0]);for(var G;me.length&&(G=me.shift());)me.length||yr===void 0?U[G]&&U[G]!==Object.prototype[G]?U=U[G]:U=U[G]={}:U[G]=yr}).apply(mr);const vr=mr.meet,wr="127425301460",cs="https://jesusdalvarado.github.io/meet/addons-web-sdk/samples/dist/hello-world/MainStage.html";async function us(){const $=await(await vr.addon.createAddonSession({cloudProjectNumber:wr})).createSidePanelClient();document.getElementById("start-activity").addEventListener("click",async()=>{await $.startActivity({mainStageUrl:cs})})}async function fs(){await(await vr.addon.createAddonSession({cloudProjectNumber:wr})).createMainStageClient()}export{fs as i,us as s};
